% PAGE GEOMETRY

\usepackage{geometry}
\geometry{left = 2.5cm}
\geometry{right = 2.5cm}
\geometry{top = 2.5cm}
\geometry{bottom = 2.5cm}


% ENCODING AND FONT

\usepackage[T1]{fontenc}  % this does a bunch of things, but for one, it makes
                % complicated characters searchable in the produced .pdf.

\usepackage[tt=false]{libertine} % to change font you'll have to remove commands such as
% \libertineDisplay from the title plage and chapter titles.

% TITLE PAGE AND CHAPTER TITLES

\usepackage{titling}
\usepackage{titlesec}

% TODO: Ensure starred and non-starred chapter titles are aligned or otherwise satisfying result
\titlespacing*{\chapter}{0pt}{0pt plus -15pt}{0pt}

\titleformat{\chapter}[display]
{\normalfont\filcenter}
{\Huge \bfseries \thechapter}
{.5em}
{
\titlerule
\vspace{0.5pc}%
\Large \libertineDisplay}
[\vspace{6cm}]

\titleformat{name=\chapter, numberless}[display]
{\normalfont\filcenter}
{}
{.5em}
{
\titlerule
\vspace{0.5pc}%
\Large \libertineDisplay}
[\vspace{6cm}]

\titlespacing*{\section}{0pt}{5.5ex plus 1ex minus .2ex}{2.3ex plus .2ex}

\titleformat{\section}[block]
{\large \bfseries \filcenter}
{\thesection}
{1em}
{}

\usepackage{emptypage} % Prevents page numbers from appearing on the empty page
% generated by the twoside option/book class.


% HEADERS AND FOOTERS

\usepackage{fancyhdr}
\setlength{\headheight}{15pt} % The second length argument of \titlespacing* above
% should be set according to this argument.
\renewcommand{\headrulewidth}{0pt}

\renewcommand{\chaptermark}[1]{ \markboth{#1}{} }
\renewcommand{\sectionmark}[1]{ \markright{\thesection.\ #1} }

\fancyhf{}
\fancypagestyle{chapterchapter}{
                \fancyhead[LE,RO]{\thepage}
                \fancyhead[CE]{\textit{ \nouppercase{\leftmark}} }
                \fancyhead[CO]{\textit{ \nouppercase{\leftmark}} }
}
\fancypagestyle{chaptersection}{
                \fancyhead[LE,RO]{\thepage}
                \fancyhead[CE]{\textit{ \nouppercase{\leftmark}} }
                \fancyhead[CO]{\textit{ \nouppercase{\rightmark}} }
}




% MATHS SYMBOLS

\usepackage{amsmath, amssymb}
\usepackage{mathtools}
\usepackage{mathdots}


% TABLE OF CONTENTS
\usepackage[titles]{tocloft}

\renewcommand{\cftdot}{} % remove dots from table of contents

\renewcommand\cftchapnumwidth{3em} % push chapter headings to the right
\renewcommand\cftsecindent{3em}

\renewcommand\cftsecnumwidth{2.7em}
\renewcommand\cftsubsecnumwidth{2.7em}

\renewcommand\cftbeforechapskip{.2em}
\renewcommand\cftbeforesecskip{.12em}


% BODY TEXT

\usepackage[lines=2, nindent=0pt]{lettrine}

\usepackage[dvipsnames]{xcolor}

\usepackage{xcolor}
\usepackage[framemethod=latex]{mdframed}
\mdfsetup{backgroundcolor=Apricot, middlelinecolor=gray}

\usepackage[hidelinks, ocgcolorlinks]{hyperref}
\hypersetup{
        colorlinks,
        linkcolor={black},
        citecolor={blue!60!black},
        urlcolor={blue!80!black}
}

% LIST ENVIRONMENTS

\usepackage{enumitem}
\setlist[enumerate,1]{label={(\alph*)}, nosep, listparindent=\parindent}
\setlist[enumerate,2]{label={(\roman*)}}


% GRAPHICS AND FIGURES

\usepackage{graphicx}

\usepackage{float}

\usepackage{quiver}

\usepackage[export]{adjustbox}

% Captions
\usepackage{caption}
\usepackage{subcaption}

\captionsetup{margin=1.5cm}

\counterwithout{figure}{chapter} % figures and tables can be
\counterwithout{table}{chapter} % numbered only by section

\graphicspath{{graphics/}}

% Inkscape with LaTeX
\usepackage{calc}


% TABLES
\usepackage{tabularray}


% STATEMENT ENVIRONMENTS (theorem, definition, proof, etc.)

\usepackage[amsmath, thmmarks]{ntheorem}

\theoremseparator{\hspace{0.5em}}  % this is the symbol (the gap) between
                % the theorem header and body.

% Environments with body text set in italics
\newtheorem{theorem}{Theorem}[section]
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{conjecture}[theorem]{Conjecture}

% Environments with body set in upright
\theorembodyfont{\normalfont}

\newtheorem{definition}[theorem]{Definition}
\newtheorem{definitions}[theorem]{Definitions}
\newtheorem{notation}[theorem]{Notation}
\newtheorem{example}[theorem]{Example}
\newtheorem{examples}[theorem]{Examples}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{remarks}[theorem]{Remarks}
\newtheorem{construction}[theorem]{Construction}
\newtheorem{exercise}[theorem]{Exercise}
\newtheorem{warning}[theorem]{Warning}
\newtheorem{question}[theorem]{Question}
\newtheorem{questions}[theorem]{Questions}

% Environments for proofs
\theoremstyle{nonumberplain}
\theoremsymbol{\ensuremath{\Box}}
\qedsymbol{\ensuremath{\Box}}

\newtheorem{proof}{Proof}

    % and for proofs of a statement long past
\newcommand{\statementname}{}
\newtheorem{proofofstatement}{Proof of \statementname}

\newenvironment{proofof}[1]
{ % code before
\renewcommand{\statementname}{#1}
\begin{proofofstatement}
}
{ % code after
\end{proofofstatement}
}


% BIBLIOGRAPHY
\emergencystretch=1em
% TODO: Choose a bibstyle that makes titles rather than journal titles italicised.
\usepackage[citestyle=alphabetic, bibstyle=alphabetic]{biblatex}
\bibliography{references}
